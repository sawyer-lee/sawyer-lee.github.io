<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
    

<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta name="keywords" content="PHP 生成器 可以做什么？, Blogs of Sawyer.Lee">
    <meta name="description" content="生成器 “generators” 的概念是在 PHP 5.5.0 版本新提出的重要新特性之一。这应该是一个很强大的工具，但似乎很多PHPer并不熟悉这个概念，更谈不上应用它。所以我认为需要花点时间来解释一下它是如何工作的以及如何充分的利用他">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>PHP 生成器 可以做什么？ | Blogs of Sawyer.Lee</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/css/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-2.2.0.min.js"></script>
</head>

</head>

<body>

<header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="container">
            <div class="nav-wrapper">
                <div class="brand-logo">
                    <a href="/" class="waves-effect waves-light">
                        
                        <img src="/medias/logo.png" class="logo-img hide-on-small-only">
                        
                        <span class="logo-span">Blogs of Sawyer.Lee</span>
                    </a>
                </div>
                

<a href="#" data-activates="mobile-nav" class="button-collapse"><i class="fa fa-navicon"></i></a>
<ul class="right">
    
    <li class="hide-on-med-and-down">
        <a href="/" class="waves-effect waves-light">
            
            <i class="fa fa-home"></i>
            
            <span>首页</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/tags" class="waves-effect waves-light">
            
            <i class="fa fa-tags"></i>
            
            <span>标签</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/categories" class="waves-effect waves-light">
            
            <i class="fa fa-bookmark"></i>
            
            <span>分类</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/archives" class="waves-effect waves-light">
            
            <i class="fa fa-archive"></i>
            
            <span>归档</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/about" class="waves-effect waves-light">
            
            <i class="fa fa-user-circle-o"></i>
            
            <span>关于</span>
        </a>
    </li>
    
    <li class="hide-on-med-and-down">
        <a href="/friends" class="waves-effect waves-light">
            
            <i class="fa fa-address-book"></i>
            
            <span>友情链接</span>
        </a>
    </li>
    
    <li>
        <a id="toggleSearch" class="waves-effect waves-light">
            <i id="searchIcon" class="mdi-action-search" title="搜索"></i>
        </a>
    </li>

</ul>

<div class="side-nav" id="mobile-nav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Blogs of Sawyer.Lee</div>
        <div class="logo-desc">
            
            Develop Language and Tools, and solution,CI,Serach,Architecture,Algorithm etc
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li>
            <a href="/" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-home"></i>
                
                首页
            </a>
        </li>
        
        <li>
            <a href="/tags" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-tags"></i>
                
                标签
            </a>
        </li>
        
        <li>
            <a href="/categories" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-bookmark"></i>
                
                分类
            </a>
        </li>
        
        <li>
            <a href="/archives" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-archive"></i>
                
                归档
            </a>
        </li>
        
        <li>
            <a href="/about" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-user-circle-o"></i>
                
                关于
            </a>
        </li>
        
        <li>
            <a href="/friends" class="waves-effect waves-light">
                
                <i class="fa fa-fw fa-address-book"></i>
                
                友情链接
            </a>
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/sawyersoft" class="waves-effect waves-light" target="_blank">
                <i class="fa fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>

    <div class="social-link">
    <a href="https://github.com/sawyersoft" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:shyues@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=79428687" class="tooltipped" data-tooltip="QQ联系我: 79428687" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>


</div>
</div>

            </div>
        </div>

        
        <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/sawyersoft" class="github-corner tooltipped hide-on-med-and-down" target="_blank" data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewbox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/>
    </svg>
</a>
        
    </nav>
</header>





<div class="bg-cover post-cover" style="background-image: url('/medias/featureimages/12.jpg')">
    <div class="container">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <div class="description center-align post-title">
                        PHP 生成器 可以做什么？
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<main class="container content">

    
    <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/PHP/" target="_blank">
                                <span class="chip text-color">PHP</span>
                            </a>
                        
                            <a href="/tags/迭代器/" target="_blank">
                                <span class="chip text-color">迭代器</span>
                            </a>
                        
                            <a href="/tags/生成器/" target="_blank">
                                <span class="chip text-color">生成器</span>
                            </a>
                        
                            <a href="/tags/yield/" target="_blank">
                                <span class="chip text-color">yield</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fa fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/PHP/" class="post-category" target="_blank">
                                PHP
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                <div class="post-date info-break-policy">
                    <i class="fa fa-calendar-minus-o fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2016-12-28
                </div>

                
				
				
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="fa fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <blockquote><p>生成器 “generators” 的概念是在 PHP 5.5.0 版本新提出的重要新特性之一。<br>这应该是一个很强大的工具，但似乎很多PHPer并不熟悉这个概念，更谈不上应用它。<br>所以我认为需要花点时间来解释一下它是如何工作的以及如何充分的利用他简化代码实现比较困难的功能。</p>
</blockquote>
<h1 id="原理："><a href="#原理：" class="headerlink" title="原理："></a>原理：</h1><p>首先我们来搞清楚一件事情——生成器到底是什么鬼？要说这么“牛X”的东东，会不会是解决某些问题的唯一办法 或者 是最简单的办法呢？非也！非也！她并不是你一见钟情的“唯一”(PS：实际上脱离任何一个依赖项，并不会引起世界大乱，总有其他替代品）。实际上，“生成器”并没有给PHP带来任何兼容性问题，任何她能干的事情，你都能通过“iterator”来实现，不要被这个新的概念“唬住”了。</p>
<h2 id="那么我们先来Look-一个例子："><a href="#那么我们先来Look-一个例子：" class="headerlink" title="那么我们先来Look 一个例子："></a>那么我们先来Look 一个例子：</h2><p>比如说我们来遍历一个文件的每一行(这也是RFC使用的一个例子，但是这里选择它还有特殊的原因，先卖关子)，“翠花”上代码先：</p>
<pre><code>$f = fopen($file, &#39;r&#39;);
while ($line = fgets($f))
{
    doSomethingWithLine($line);
}</code></pre>
<p>这是再普通不过的应用了，但是如果我们想把它抽象化调用的话会怎么样呢？比如说，我们想通过一些抽象的资源来读取这些数据的话该怎么办？可能我们今天从文件中获取数据，但是也许明天我们需要改为通过数据库获取数据记录，也或许从一个专有服务调用获取数据包，甚至其他可能的途径。</p>
<h2 id="到目前为止，我们有两种途径来实现。"><a href="#到目前为止，我们有两种途径来实现。" class="headerlink" title="到目前为止，我们有两种途径来实现。"></a>到目前为止，我们有两种途径来实现。</h2><ul>
<li>1、通过方法调用（Class::function()的方式）返回一个Array。</li>
<li>2、也可返回一个iterator迭代器。</li>
</ul>
<p>方法调用每次返回数组，这会有两个麻烦：</p>
<ul>
<li>第一、可能无法把所有数据load到内存中（小文件当然没问题，但是如果文件30G的话怎么办呢？）。</li>
<li>第二、我们可能根本无法构建这么一个数组（例如，构建一个“无限数列”，让客户端(方法调用者)判定队列中已经填充有多少元素）。</li>
</ul>
<p>所以留给我们的就只有使用iterator了，上面的代码可以很简洁的转换成一个iterator迭代器。事实上对于这个例子，PHP已经有内置的迭代器为我们实现了.<br>那就是“流X哄哄”的：SPLFileObject。处于做范例讲解的原因，我们自己来实现一下：</p>
<pre><code>class FileIterator implements Iterator {
    protected $f;
    public function __construct($file) {
        $this-&gt;f = fopen($file, &#39;r&#39;);
        if (!$this-&gt;f) throw new Exception();
    }
    public function current() {
        return fgets($this-&gt;f);
    }
    public function key() {
        return ftell($this-&gt;f);
    }
    public function next() {}
    public function rewind() {
        fseek($this-&gt;f, 0);
    }
    public function valid() {
        return !feof($this-&gt;f);
    }
}</code></pre>
<p>觉的很简单是不是？事实上，不完全是。如果你仔细看这个代码，你会发现这个代码并不符合iterator的规则要求。<br>Next 和 Rewind方法是迭代器iterator支持的唯一触发方法，另外调用current多次应该返回同样的值。但是这里不是，基于某些原因这里我故意设下这个错误，来展示如何直接将代码转换为迭代器。<br>实际上要正确的实现没那么容易，那么让我们来看一下正确的实现是什么样子：</p>
<pre><code>class FileIterator implements Iterator {
    protected $f;
    protected $data;
    protected $key;
    public function __construct($file) {
        $this-&gt;f = fopen($file, &#39;r&#39;);
        if (!$this-&gt;f) throw new Exception();
    }
    public function __destruct() {
        fclose($this-&gt;f);
    }
    public function current() {
        return $this-&gt;data;
    }
    public function key() {
        return $this-&gt;key;
    }
    public function next() {
        $this-&gt;data = fgets($this-&gt;f);
        $this-&gt;key++;
    }
    public function rewind() {
        fseek($this-&gt;f, 0);
        $this-&gt;data = fgets($this-&gt;f);
        $this-&gt;key = 0;
    }
    public function valid() {
        return false !== $this-&gt;data;
    }
}</code></pre>
<p>哇～，要实现一个简单的文件迭代任务需要这么多代码来维护各种状态(不过不要紧，大多数像这样繁重的工作都已经有内置函数实现了)。接下来，想象一下如果你需要操作更多的状态或者处理更复杂的算法实现，将会是什么样子？当然了，你可以通过各种方法调用来存储和操作状态，但那仍然是非常困难的，还有更麻烦的是各种调用组合。</p>
<h2 id="所以才引入了“generator”来解决这样的问题："><a href="#所以才引入了“generator”来解决这样的问题：" class="headerlink" title="所以才引入了“generator”来解决这样的问题："></a>所以才引入了“generator”来解决这样的问题：</h2><pre><code>function getLines($file) {
    $f = fopen($file, &#39;r&#39;);
    if (!$f) throw new Exception();
    while ($line = fgets($f)) {
        yield $line;
    }
    fclose($f);
}</code></pre>
<p>看上去是不是简单多了？实际上是相同功能不同语法，只是用了新的关键词yield。</p>
<h1 id="它是如何工作的？"><a href="#它是如何工作的？" class="headerlink" title="它是如何工作的？"></a>它是如何工作的？</h1><p>这里要注意的重要一点是函数的返回值已经改变。 yield关键字的存在使PHP引擎返回特殊Generator类的实例。 该类实现了Iterator，因此可以直接在迭代上下文中使用：</p>
<pre><code>foreach (getLines(&quot;someFile&quot;) as $line) {
    doSomethingWithLine($line);
}</code></pre>
<p>最酷的是我们可以随机构建任何我们想要的代码，只需要 yield 每一步迭代的值即可。那么，具体怎么运行的呢？<br>我们来看一下，当你调用getLines()方法时，PHP会运行代码直到遇到第一个“yield”，这个时候会记住这个值并返回Generator的实例，<br>然后当next()被Generator对象内部调用的时候，PHP将会继续从上一个“yield”语句处重复运行，直到遇到下一个“yield” 或者 到达方法末尾的return 结束。</p>
<p>理解了这点之后，下面构建一个有用的生成器：</p>
<pre><code>function doStuff() {
    $last = 0;
    $current = 1;
    yield 1;
    while (true) {
        $last = $current - $last;
        $current = $last + $current;
        yield $current;
    }
}</code></pre>
<p>你能看出他是做什么吗？乍一看，像一个死循环，对么？对喽，实际上如果我们想，它确实可以成为一个死循环。<br>但是仔细看看一下，你会发现它其实是用最简单的办法实现了一个“斐波那契数列”，那么我们就测试一下这个数列的计算与使用公式的计算进行比较，看他们的差距如何，上示例代码：<br>下面使用Generator构建的数列，可以测试内存使用和计算需要的时间</p>
<pre><code>&#x2F;&#x2F; Commond line params
$var = $argv[1];
&#x2F;&#x2F; Generator way ,since 5.5.0
$memoryStart = memory_get_usage();
$timeStart = microtime(true);
function doStuff() {
    $last = 0;
    yield 0;
    $current = 1;
    yield 1;
    while (true) {
            $current = $last + $current;
            $last = $current - $last;
            yield $current;
    }
}
&#x2F;&#x2F; Iterate the generator way,save memory
foreach(doStuff() as $key =&gt; $number)
{
    if($key == $var)
    {
        echo $number;
        break;
    }
}
$memoryEnd = memory_get_usage();
$timeEnd = microtime(true);
echo &#39;-Memory Usage:&#39;,$memoryEnd-$memoryStart,&#39;-Runtime:&#39;,$timeEnd-$timeStart,PHP_EOL;</code></pre>
<p>再来看看直接使用数学公式，递归的方式进行计算(与循环的方式类似)的运行情况：</p>
<pre><code>&#x2F;&#x2F; Simple traditional way, huge memory usage.crash when number larger
$memoryStart2 = memory_get_usage();
$timeStart2 = microtime(true);
function foo($i){
    if($i == 0) return 0;
    if($i == 1) return 1;
    return foo($i-2)+foo($i-1);
}
$number = foo($var);
$memoryEnd2 = memory_get_usage();
$timeEnd2 = microtime(true);
echo $number, &#39;-Memory Usage:&#39;,($memoryEnd2-$memoryStart2),&#39;-Runtime:&#39;,$timeEnd2-$timeStart2,PHP_EOL;
echo &#39;Recursive call calculate consume Time is &#39;,($timeEnd2-$timeStart2) &#x2F; ($timeEnd-$timeStart),&#39; times of Generator iterator!!&#39;,PHP_EOL;</code></pre>
<p>可见在某些场景下，效果巨大差距非常明显，但是必须记住的是，Generator并非Iterator的替代，而只是一种简便或者更有效的实现方式。<br>Iterator 仍然有强大的用途，特别是在集合类中，需要维护一系列明确的对象状态的场景是极其有效地。</p>
<h2 id="一个更复杂的例子"><a href="#一个更复杂的例子" class="headerlink" title="一个更复杂的例子"></a>一个更复杂的例子</h2><p>比方说我们要创建一个用户空间的ArrayObject实现，不是实现迭代器，并且需要我们手动处理数组迭代，我们可以用点儿小技巧。<br>我们可以通过实现IteratorAggregate接口来构建我们自己的生成器，该接口要求一个单一方法：getIterator()。<br>因为生成器方法返回一个实现了Iterator的对象，所以我们可以通过实现接口的方法来构造我们自己的生成器！想象一下下面这个简单的类：<br><pre><code>class ArrayObject implements IteratorAggregate {
    protected $array;
    public function __construct(array $array) {
        $this-&gt;array = $array;
    }
    public function getIterator() {
        foreach ($this-&gt;array as $key =&gt; $value) {
            yield $key =&gt; $value;
        }
    }
}</code></pre></p>
<p>如此简单的实现，很容易掌握，并且如果你注意的话，我们可以使用通常的key语法，返回一个自定义的key。这里的重点是它带有一个复杂的任务(明确的存储状态)并且我们显式的完成它，用语言优势完成它。这样我们可以专注于完成业务，而避免去尝试一大堆的模板代码，但我们没有完成…</p>
<p>发送反馈数据<br>我们同样可以选择使用generator返回数据。yield方法也可以返回一个value值，即使用send()发给generator的值。这可能会比较方便，取决于我们想要做什么。所以，我们来看一个例子。比如说，我们要记录一堆日志数据。当然了，我们可以写一个功能齐全的重量级日志类，分别维护各种状态实现(我们一定可以很好地完成)，但是这里我们可以简单的使用一个生成器(Generator)完成：<br><pre><code>function createLog($file) {
    $f = fopen($file, &#39;a&#39;);
    while (true) {
        $line = yield;
        fwrite($f, $line);
    }
}
$log = createLog($file);
$log-&gt;send(&quot;First&quot;);
$log-&gt;send(&quot;Second&quot;);
$log-&gt;send(&quot;Third&quot;);</code></pre></p>
<p>及其简单…可能确实太简单的原因，那么我们看一个复杂一点儿的例子。一个协同程序(协同程序共同工作，来产生往复控制)。比如说，我们要构造一个队列批处理系统，可以提取数据，可以批量发送往返数据。就如同读取二进制流是反复读取指定长度的信息一样。我们可以手动将它们链接起来，或者我们创建一些列的生成器来实现：</p>
<h1 id="参考列表："><a href="#参考列表：" class="headerlink" title="参考列表："></a>参考列表：</h1><p>PHP官方文档：<a href="http://php.net/manual/zh/language.generators.overview.php" target="_blank" rel="noopener">http://php.net/manual/zh/language.generators.overview.php</a><br>Anthony Ferrara博客：<a href="http://blog.ircmaxell.com/2012/07/what-generators-can-do-for-you.html" target="_blank" rel="noopener">http://blog.ircmaxell.com/2012/07/what-generators-can-do-for-you.html</a><br>PHP 5.5: The Power to Yield: <a href="http://cogitolearning.co.uk/?p=821" target="_blank" rel="noopener">http://cogitolearning.co.uk/?p=821</a></p>

            </div>
            <hr>

            
            <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.88rem;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff;
        background-color: #22AB38;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff;
        background-color: #019FE8;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a class="reward-link btn-floating btn-large waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close"><i class="fa fa-close"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs">
                        <li class="tab wechat-tab waves-effect waves-light"><a class="active" href="#wechat">微信</a></li>
                        <li class="tab alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                    </ul>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('#reward .reward-link').on('click', function () {
            $('#rewardModal').openModal();
        });

        $('#rewardModal .close').on('click', function () {
            $('#rewardModal').closeModal();
        });
    });
</script>
            

            

            <div class="reprint">
                <p>
                    <span class="reprint-tip">
                        <i class="fa fa-exclamation-circle"></i>&nbsp;&nbsp;转载请注明:
                    </span>
                    <a href="http://sawyersoft.github.io" class="b-link-green">Blogs of Sawyer.Lee</a>
                    <i class="fa fa-angle-right fa-lg fa-fw text-color"></i>
                    <a href="/2016/12/28/php-Generators/" class="b-link-green">PHP 生成器 可以做什么？</a>
                </p>
            </div>
        </div>
    </div>

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fa fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2017/02/20/Redis管道提升操作性能/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/2.jpg" class="responsive-img" alt="使用Redis管道提升批量操作性能">
                        
                        <span class="card-title">使用Redis管道提升批量操作性能</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">简介
最近在工作中使用了Redis的管道技术。
发现对于互不相关的多次Redis操作使用管道可以极大的提升性能。
特此记录。

浅析
个人觉得问题可能出在TCP连接上。
Redis使用TCP协议进行数据传输，在多次Redis命令中会有大量的</div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="fa fa-clock-o fa-fw icon-date"></i>2017-02-20
                        </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Redis/" class="post-category" target="_blank">
                                    Redis
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/PHP/" target="_blank">
                        <span class="chip text-color">PHP</span>
                    </a>
                    
                    <a href="/tags/Redis/" target="_blank">
                        <span class="chip text-color">Redis</span>
                    </a>
                    
                    <a href="/tags/管道/" target="_blank">
                        <span class="chip text-color">管道</span>
                    </a>
                    
                    <a href="/tags/性能提升/" target="_blank">
                        <span class="chip text-color">性能提升</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                本篇&nbsp;<i class="fa fa-dot-circle-o"></i>
            </div>
            <div class="card">
                <a href="/2016/12/28/php-Generators/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/12.jpg" class="responsive-img" alt="PHP 生成器 可以做什么？">
                        
                        <span class="card-title">PHP 生成器 可以做什么？</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary">生成器 “generators” 的概念是在 PHP 5.5.0 版本新提出的重要新特性之一。这应该是一个很强大的工具，但似乎很多PHPer并不熟悉这个概念，更谈不上应用它。所以我认为需要花点时间来解释一下它是如何工作的以及如何充分的利用他</div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="fa fa-clock-o fa-fw icon-date"></i>2016-12-28
                            </span>
                        <span class="publish-author">
                            
                            <i class="fa fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/PHP/" class="post-category" target="_blank">
                                    PHP
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/PHP/" target="_blank">
                        <span class="chip text-color">PHP</span>
                    </a>
                    
                    <a href="/tags/迭代器/" target="_blank">
                        <span class="chip text-color">迭代器</span>
                    </a>
                    
                    <a href="/tags/生成器/" target="_blank">
                        <span class="chip text-color">生成器</span>
                    </a>
                    
                    <a href="/tags/yield/" target="_blank">
                        <span class="chip text-color">yield</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>
</div>


    

</main>


<footer class="page-footer bg-color">
    <div class="container row center-align">
        <div class="col s12 m8 l8 copy-right">
            本站由&copy;<a href="https://sawyersoft.github.io/" target="_blank">Sawyer</a>基于
            <a href="https://hexo.io/" target="_blank">Hexo</a> 的
            <a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">hexo-theme-matery</a>主题搭建.

            

            
			
                <br>
                
                <span id="busuanzi_container_site_pv">
                    <i class="fa fa-heart-o"></i>
                    本站总访问量 <span id="busuanzi_value_site_pv" class="white-color"></span>
                </span>
                
                
                <span id="busuanzi_container_site_uv">
                    <i class="fa fa-users"></i>
                    次,&nbsp;访客数 <span id="busuanzi_value_site_uv" class="white-color"></span> 人.
                </span>
                
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/sawyersoft" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fa fa-github"></i>
    </a>



    <a href="mailto:shyues@gmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fa fa-envelope-open"></i>
    </a>



    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=79428687" class="tooltipped" data-tooltip="QQ联系我: 79428687" data-position="top" data-delay="50">
        <i class="fa fa-qq"></i>
    </a>


</div>
    </div>
</footer>

<div class="progress-bar"></div>


<!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fa fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字" class="search-input" autofocus>
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="/js/search.js"></script>
<script type="text/javascript">
    searchFunc("/" + "search.xml", 'searchInput', 'searchResult');
</script>
<!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fa fa-angle-up"></i>
    </a>
</div>


<script src="/libs/materialize/js/materialize.min.js"></script>
<script src="/libs/masonry/masonry.pkgd.min.js"></script>
<script src="/libs/aos/aos.js"></script>
<script src="/libs/scrollprogress/scrollProgress.min.js"></script>
<script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
<script src="/js/matery.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->



    <script src="/libs/others/clicklove.js"></script>


    <script async src="/libs/others/busuanzi.pure.mini.js"></script>


</body>
</html>